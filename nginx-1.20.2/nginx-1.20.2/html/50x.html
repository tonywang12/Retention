
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>MMCC3045</title>
<link rel="stylesheet" href="styles.css" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="hittest.js"></script>
<script>
$(document).ready(function() { 
    var going;
    var animation;
    var movement = {
        81: { top: '-=1'},
        65: { top: '+=1'},
        79: { left: '-=1'},
        80: { left: '+=1'},
    }
    
    $(document).one('keydown',keyDown);
    
    function keyDown(event){
        $(document).one('keyup',keyUp);
        if(event.keyCode==81||event.keyCode==65||event.keyCode==79||event.keyCode==80){
            animation = movement[event.keyCode];
            going = setInterval(keepGoing,1);
        }
    }

    function keepGoing(){
        $('#player').css(animation);
    }

    function keyUp(){
        clearInterval(going);
        $(document).one('keydown',keyDown);
    }

    function detectCollision(){
        var hit = $('#player').objectHitTest({"object":$('#goal'),"transparency":true});
        console.log(hit);
        if(hit){
            $('#player').hide();
            clearInterval(collisionTimer);
        }
    }
    var collisionTimer = setInterval(detectCollision,50);
})
</script>
</head>
<body>
    <img src="player.png" id="player">
    <img src="tunnel.png" id="wall">
    <img id="goal" src = "test.png">
</body>
</html>
