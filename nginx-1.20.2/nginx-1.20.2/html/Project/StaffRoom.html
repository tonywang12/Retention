<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Prologue</title>
<link rel="stylesheet" href="styles.css" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() { 
    $('#content').hide();
    $('#content').fadeIn(3000);
    $('#chatbox').hide();
    $('#key').hide();
    $('#firstDevil').hide();
    $('#arrowLeft').hide();
    var counter = 0;
    var clicked = true;

    if (localStorage.getItem('firstDevilDefeat') == 'false' && localStorage.getItem('firstKey') == 'false'){

    $("div#stage").click(ClickCommand);

    function ClickCommand(){
        if (clicked){
        counter++;
        }
        if (counter == 1){
            $('#blur').css({ 'opacity': '0.5'});
            $('div#chattext').text("Something doesn't feel right.");
            $('#chatbox').show();
        }
        if (counter == 2){
            $('div#chattext').text("");
            //fade in the devil
            $('#firstDevil').fadeIn(3000);
        }
        if (counter == 3){
            window.location = 'fight1.html';
        }
    }
}
    
    if (localStorage.getItem('firstDevilDefeat') == 'true'){

        $("div#stage").click(ClickCommand);

    function ClickCommand(){
        if (clicked){
        counter++;
        }
        if (counter == 1){
        $('#blur').css({ 'opacity': '0.5'});
        $('div#chattext').text("The devil seemed to drop something...");
        $('#chatbox').show();
     }
        if (counter == 2){
            $('#chatname').hide();
            $('div#chattext').text("*You obtained a KEY!*");
        }
        if (counter == 3){
            $('#chatname').show();
            $('div#chattext').text("Looks like this might be useful.");
            localStorage.setItem('firstKey', 'true');
            localStorage.setItem('firstDevilDefeat', 'false');
            $('#chatbox').hide();
            $('#blur').css({ 'opacity': '0'});
            $('#arrowLeft').show();

        }
    }
    }

    if (localStorage.getItem('firstDevilDefeat') == 'false' && localStorage.getItem('firstKey') == 'true'){
        $('#arrowLeft').show();
    }

        $("#arrowLeft").click(function(){
            window.location = 'hallway1.html';
        })
});
</script>
</head>
<body>
<div id ="stage">
    <div id="content">
        <img id="firstDevil" src="test.png">
        <img id="arrowLeft" src="test.png">
        <div id="key" class="clickables"></div>
    <div id="blur"></div>
    <div id="chatbox"> 
        <div id="chatname">D</div>
        <div id="chattext"></div>
    </div>
</div>
</div>

</body>
</html>