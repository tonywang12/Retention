<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Test Fight</title>
<link rel="stylesheet" href="styles.css" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() { 
    $('#chatbox').hide();
    $('#fightbox').hide();
    $('#arrowLeft').hide();
    $('#attackbox').hide();
    $('#skillbox').hide();
    $('#itembox').hide();

    $('#firstDevil').show();

    

    var counter = 0;
    var battlecounter = 0;

    var devilHealth = 100;
    var health = 100;

    $("div#stage").click(ClickCommand);

    function ClickCommand(){
        counter++;
        if (counter == 1){
            $('#blur').css({ 'opacity': '0.5'});
            $('div#chattext').text("It's been a while since I last fought.");
            $('#chatbox').show();
        }
        if (counter == 2){
            $('#blur').css({ 'opacity': '0'});
            $('#chatbox').hide();
            $('#fightbox').show();
            //fade in the devil
        }
        if (counter == 3){
            $('#fightInstructions').show();
            battleTurn();
        }
        //battle log
    }

    function devilTurn(){

        if (devilHealth<=0){
            $('#firstDevil').fadeOut(2000);
        }
        if (battlecounter==1){
            console.log("1");
            $('div#chattext').text("devil attacks");
            setTimeout(function(){
                health-=10;
                $('#health').css({ 'width': '-=10%'});
                $('#chatbox').hide();
                battleTurn();
            },1500)
        }
        if (battlecounter==2){
            console.log("2");
            $('div#chattext').text("devil attacks 2");
            setTimeout(function(){
                health-=10;
                $('#health').css({ 'width': '-=10%'});
                $('#chatbox').hide();
                battleTurn();
            },1500)
        }
        if (battlecounter==3){
            console.log("3");
            $('div#chattext').text("devil attacks 3");
            setTimeout(function(){
                health-=30;
                $('#health').css({ 'width': '-=30%'});
                $('#chatbox').hide();
                battleTurn();
            },1500)
        }
        if (battlecounter==4){
            console.log("4");
            $('div#chattext').text("devil attacks 4");
            setTimeout(function(){
                health-=10;
                $('#health').css({ 'width': '-=10%'});
                $('#chatbox').hide();
                battleTurn();
            },1500)
        }
        if (battlecounter==5){
            console.log("5");
            $('div#chattext').text("devil attacks 5");
            setTimeout(function(){
                health-=10;
                $('#health').css({ 'width': '-=10%'});
                $('#chatbox').hide();
                battleTurn();
            },1500)
        }
    }

    

    function battleTurn(){
        console.log("battle turn");
        $('#actions').show();

        $("div#attack").click(function(){
            $('#actions').hide();
            $('#attackbox').show();
            
        })
    $("div#skill").click(function(){
             $('#actions').hide();
            $('#skillbox').show();
    })
    $("div#attack1").click(function(){
            $('#chatname').hide();
            $('#attackbox').hide();
            $('#actions').hide();
            $('#chatbox').show();
            $('div#chattext').text("D used slash!");
            setTimeout(function(){
                console.log("battlecounter ++");
                devilHealth-=10;
                $('#enemyhealth').css({ 'width': '-=10%'});
                battlecounter++;
            
                devilTurn();
  
            },1500)
        })
    $("div#attack2").click(function(){
            
            $('#attackbox').hide();
            $('#actions').show();
            $('#chatname').hide();
            $('#chatbox').show();
            $('div#chattext').text("D used kick!");
            setTimeout(function(){
                devilHealth-=20;
            $('#enemyhealth').css({ 'width': '-=20%'});
                battlecounter++;
                devilTurn();
            },1500)
    })
    $("div#attack3").click(function(){
            
            $('#attackbox').hide();
            $('#chatname').hide();
            $('#actions').show();
            $('#chatbox').show();
            $('div#chattext').text("D used DD!");
            setTimeout(function(){
                devilHealth-=30;
            $('#enemyhealth').css({ 'width': '-=30%'});
                battlecounter++;
                devilTurn();
            },1500)
    })
    $("div#back").click(function(){
            $('#attackbox').hide();
            $('#skillbox').hide();

            $('#actions').show();
    })

    $("div#skill1").click(function(){
            devilHealth-=20;
            $('#enemyhealth').css({ 'width': '-=20%'});
            if (health+=20 >= 100){
                health = 100;
                $('#health').css({ 'width': '130px'});
            } else {
                health+=20
                $('#health').css({ 'width': '+=20%'});
            }
            mana -= 30;
            $('#mana').css({ 'width': '-=30%'});
            console.log(devilHealth);
            $('#skillbox').hide();
            $('#chatname').hide();
            $('#actions').show();
            $('#chatbox').show();
            $('div#chattext').text("D used heal shot!");
            setTimeout(function(){
                battlecounter++;
                devilTurn();
            },1500)
        })
    $("div#skill2").click(function(){
            mana-=40
            $('#mana').css({ 'width': '-=40%'});
            if (health+=50 >= 100){
                health = 100;
                $('#health').css({ 'width': '130px'});
            }else{
            health+=50
            $('#health').css({ 'width': '+=50%'});
            }
            console.log(devilHealth);
            $('#chatname').hide();
            $('#skillbox').hide();
            $('#actions').show();
            $('#chatbox').show();
            $('div#chattext').text("D used heal!");
            setTimeout(function(){
                battlecounter++;
                devilTurn();
            },1500)
    })
    }
    
});
</script>
</head>
<body>
<div id ="stage">
    <div id="content">
        <img id="firstDevil" src="test.png">
        <div id="bar">
            <div id="enemyhealth"></div>
        </div>
    <div id="blur"></div>
    <div id="fightInstructions"></div>
    <div id="playerinfo">
        <div id="healthbar">
            <div id="health"></div>
        </div>
        <div id="manabar">
            <div id="mana"></div>
        </div>
    </div>
    <div id="fightbox">
        <div id="actions">
        <div id="attack">Attack</div>
        <div id="skill">Skill</div>
    </div>
    <div id="attackbox">
        <div id="attack1">Slash</div>
        <div id="attack2">Kick</div>
        <div id="attack3">DD</div>
        <div id="back">Back</div>
    </div>

    <div id="skillbox">
        <div id="skill1">punch</div>
        <div id="skill2">heal</div>
        <div id="back">Back</div>
    </div>
</div>
<!-- Hover over a move will show a text box on side on information aboiut the move -->


    <div id="chatbox"> 
        <div id="chatname">D</div>
        <div id="chattext"></div>
    </div>
</div>
</div>

</body>
</html>